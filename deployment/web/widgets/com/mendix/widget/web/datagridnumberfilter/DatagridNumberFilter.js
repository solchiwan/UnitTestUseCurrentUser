define(["react","big.js","mendix/filters/builders"],(function(e,t,a){"use strict";var l,r,n=(function(e){
/*!
      Copyright (c) 2017 Jed Watson.
      Licensed under the MIT License (MIT), see
      http://jedwatson.github.io/classnames
    */
!function(){var t={}.hasOwnProperty;function a(){for(var e=[],l=0;l<arguments.length;l++){var r=arguments[l];if(r){var n=typeof r;if("string"===n||"number"===n)e.push(r);else if(Array.isArray(r)&&r.length){var u=a.apply(null,r);u&&e.push(u)}else if("object"===n)for(var i in r)t.call(r,i)&&r[i]&&e.push(i)}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):window.classNames=a}()}(r={path:l,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&r.path)}},r.exports),r.exports);const u=({className:t,bootstrapStyle:a,children:l})=>e.Children.count(l)>0?e.createElement("div",{className:n("alert alert-".concat(a),t)},l):null;u.displayName="Alert";var i;function o(t){const[a,l]=e.useState(t.defaultFilter),[r,u]=e.useState(!1),i=e.useRef(null);var o,s;o=i,s=()=>u(!1),e.useEffect((()=>{const e=e=>{o.current&&!o.current.contains(e.target)&&s()};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}}),[o,s]);const c=e.useCallback((e=>{l(e),t.onChange(e),u(!1)}),[t.onChange]);return e.useEffect((()=>{l(t.defaultFilter),t.onChange(t.defaultFilter)}),[t.defaultFilter,t.onChange]),e.createElement("div",{className:"filter-selector"},e.createElement("div",{className:"filter-selector-content",ref:i},e.createElement("button",{"aria-controls":"".concat(t.name,"-filter-selectors"),"aria-expanded":r,"aria-haspopup":!0,"aria-label":t.ariaLabel,className:n("btn btn-default filter-selector-button button-icon",a),onClick:()=>u((e=>!e))},"Â "),r&&e.createElement("ul",{id:"".concat(t.name,"-filter-selectors"),className:"filter-selectors",role:"menu","data-focusindex":0},t.options.map(((t,l)=>e.createElement("li",{className:n({"filter-selected":a===t.value}),key:l,onClick:()=>c(t.value),onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),c(t.value))},role:"menuitem",tabIndex:0},e.createElement("div",{className:n("filter-icon",t.value),"aria-hidden":!0}),e.createElement("div",{className:"filter-label"},t.label)))))))}function s(a){var l;const[r,u]=e.useState(a.defaultFilter),[i,s]=e.useState(void 0),[c,d]=e.useState(void 0),m=e.useRef(null);e.useEffect((()=>{a.value&&(d(a.value.toString()),s(a.value))}),[a.value]),e.useEffect((()=>{var e;null===(e=a.updateFilters)||void 0===e||e.call(a,i,r)}),[i,r]);const f=e.useCallback(((e,t)=>{let a=null;return(...l)=>{null!==a&&(clearTimeout(a),a=null),a=setTimeout((()=>e(...l)),t)}})((e=>s(e)),a.delay),[a.delay]),v=e.useCallback((()=>{m.current&&m.current.focus()}),[m]);return e.createElement("div",{className:"filter-container","data-focusindex":null!==(l=a.tabIndex)&&void 0!==l?l:0},a.adjustable&&e.createElement(o,{ariaLabel:a.screenReaderButtonCaption,name:a.name,defaultFilter:a.defaultFilter,onChange:e.useCallback((e=>{u(e),v()}),[v]),options:[{value:"greater",label:"Greater than"},{value:"greaterEqual",label:"Greater than or equal"},{value:"equal",label:"Equal"},{value:"notEqual",label:"Not equal"},{value:"smaller",label:"Smaller than"},{value:"smallerEqual",label:"Smaller than or equal"}]}),e.createElement("input",{"aria-label":a.screenReaderInputCaption,className:n("form-control",{"filter-input":a.adjustable}),onChange:e=>{const a=e.target.value;a&&!isNaN(Number(a))?(d(a),f(new t.Big(Number(a)))):(d(a),f(void 0))},placeholder:a.placeholder,ref:m,type:"number",value:c}))}return function(e){e.Number="number",e.DateTime="datetime"}(i||(i={})),function(t){const l=window["com.mendix.widgets.web.datagrid.filterContext"],r=e.createElement(u,{bootstrapStyle:"danger"},"The data grid number filter widget must be placed inside the header of the Data grid 2.0 widget.");return(null==l?void 0:l.Consumer)?e.createElement(l.Consumer,null,(l=>{var n,i,o,c,d,m;if(!l||!l.filterDispatcher||!l.attribute)return r;const{filterDispatcher:f,attribute:v,initialFilters:b}=l,p=function(e){if(e&&1===e.length){const[t]=e;let a="equal";switch(t.type){case">":a="greater";break;case">=":a="greaterEqual";break;case"=":a="equal";break;case"!=":a="notEqual";break;case"<":a="smaller";break;case"<=":a="smallerEqual"}return{type:a,value:t.value}}}(b),h=(g=v.type)&&!g.match(/AutoNumber|Decimal|Integer|Long/)?"The attribute type being used for Data grid number filter is not 'Auto number, Decimal, Integer or Long'":null;var g;return h?e.createElement(u,{bootstrapStyle:"danger"},h):e.createElement(s,{adjustable:t.adjustable,defaultFilter:null!==(n=null==p?void 0:p.type)&&void 0!==n?n:t.defaultFilter,delay:t.delay,name:t.name,placeholder:null===(i=t.placeholder)||void 0===i?void 0:i.value,screenReaderButtonCaption:null===(o=t.screenReaderButtonCaption)||void 0===o?void 0:o.value,screenReaderInputCaption:null===(c=t.screenReaderInputCaption)||void 0===c?void 0:c.value,tabIndex:t.tabIndex,updateFilters:(e,t)=>f({getFilterCondition:()=>function(e,t,l){if(!e||!e.filterable||!t)return;return{greater:a.greaterThan,greaterEqual:a.greaterThanOrEqual,equal:a.equals,notEqual:a.notEqual,smaller:a.lessThan,smallerEqual:a.lessThanOrEqual}[l](a.attribute(e.id),a.literal(t))}(v,e,t)}),value:null!==(d=null==p?void 0:p.value)&&void 0!==d?d:null===(m=t.defaultValue)||void 0===m?void 0:m.value})})):r}}));
